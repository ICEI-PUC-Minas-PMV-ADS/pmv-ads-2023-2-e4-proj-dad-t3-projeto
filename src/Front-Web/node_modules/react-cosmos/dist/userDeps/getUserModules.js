import path from 'path';
import { slash } from '../utils/slash.js';
import { findUserModulePaths } from './findUserModulePaths.js';
export function getUserModules({ rootDir, fixturesDir, fixtureFileSuffix, ignore, }) {
    const { fixturePaths, decoratorPaths } = findUserModulePaths({
        rootDir,
        fixturesDir,
        fixtureFileSuffix,
        ignore,
    });
    return {
        fixtures: getDefaultExports(fixturePaths, rootDir),
        decorators: getDefaultExports(decoratorPaths, rootDir),
    };
}
function getDefaultExports(paths, rootDir) {
    const exportsByPath = {};
    paths.forEach(p => {
        // Converting to forward slashes on Windows is important because the
        // slashes are used for generating a sorted list of fixtures and
        // decorators.
        const relPath = slash(path.relative(rootDir, p));
        exportsByPath[relPath] = require(p).default;
    });
    return exportsByPath;
}
