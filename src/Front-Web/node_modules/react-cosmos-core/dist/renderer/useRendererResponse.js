import { useEffect, useRef } from 'react';
import { getFixtureListFromWrappers } from './getFixtureList.js';
export function useRendererResponse(rendererId, rendererConnect, moduleWrappers, initialFixtureId) {
    const readyRef = useRef(false);
    useEffect(() => {
        const fixtures = getFixtureListFromWrappers(moduleWrappers);
        if (readyRef.current) {
            rendererConnect.postMessage({
                type: 'fixtureListUpdate',
                payload: { rendererId, fixtures },
            });
        }
        else {
            rendererConnect.postMessage({
                type: 'rendererReady',
                payload: initialFixtureId
                    ? { rendererId, fixtures, initialFixtureId }
                    : { rendererId, fixtures },
            });
            readyRef.current = true;
        }
    }, [initialFixtureId, moduleWrappers, rendererConnect, rendererId]);
}
