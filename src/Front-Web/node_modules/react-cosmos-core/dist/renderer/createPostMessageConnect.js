import { registerPlaygroundShortcuts } from './registerPlaygroundShortcuts.js';
export function createPostMessageConnect() {
    function postMessage(msg) {
        parent.postMessage(msg, '*');
    }
    return {
        postMessage,
        onMessage(onMessage) {
            function handleMessage(msg) {
                onMessage(msg.data);
            }
            window.addEventListener('message', handleMessage, false);
            const removeShortcuts = registerPlaygroundShortcuts(command => {
                postMessage({ type: 'playgroundCommand', payload: { command } });
            });
            return () => {
                window.removeEventListener('message', handleMessage);
                removeShortcuts();
            };
        },
    };
}
